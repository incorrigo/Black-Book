<Window x:Class="BlackBook.Views.CorrespondenceEntryWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:models="clr-namespace:BlackBook.Models"
        xmlns:conv="clr-namespace:BlackBook.Converters"
        Title="Enter Correspondence"
        Height="450" Width="550"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- Timestamp -->
            <RowDefinition Height="Auto"/>
            <!-- Person -->
            <RowDefinition Height="Auto"/>
            <!-- Company -->
            <RowDefinition Height="Auto"/>
            <!-- Relationship -->
            <RowDefinition Height="Auto"/>
            <!-- Direction -->
            <RowDefinition Height="Auto"/>
            <!-- Type -->
            <RowDefinition Height="Auto"/>
            <!-- Situation -->
            <RowDefinition Height="*"/>
            <!-- Notes -->
            <RowDefinition Height="Auto"/>
            <!-- Buttons -->
            <RowDefinition Height="200"/>
            <!-- History -->
        </Grid.RowDefinitions>

        <TextBlock x:Name="TimestampText"
                   Grid.Row="0"
                   FontSize="12"
                   HorizontalAlignment="Right"
                   Margin="0 0 0 10"/>

        <TextBox x:Name="PersonTextBox"
                 Grid.Row="1"
                 Padding="6"
                 Margin="0 0 0 10"
                 TextChanged="PersonTextBox_TextChanged"/>

        <TextBox x:Name="CompanyTextBox"
                 Grid.Row="2"
                 Padding="6"
                 Margin="0 0 0 10"
                 TextChanged="CompanyTextBox_TextChanged"/>

        <ComboBox x:Name="RelationshipComboBox"
                  Grid.Row="3"
                  Padding="6"
                  Margin="0 0 0 10"
                  SelectedIndex="0">
            <ComboBoxItem Content="Unknown"/>
            <ComboBoxItem Content="Friendly"/>
            <ComboBoxItem Content="Neutral"/>
            <ComboBoxItem Content="Adversarial"/>
        </ComboBox>

        <ComboBox x:Name="DirectionComboBox"
                  Grid.Row="4"
                  Padding="6"
                  Margin="0 0 0 10"
                  SelectedIndex="0">
            <ComboBoxItem Content="Incoming"/>
            <ComboBoxItem Content="Outgoing"/>
        </ComboBox>

        <ComboBox x:Name="InteractionTypeComboBox"
                  Grid.Row="5"
                  Padding="6"
                  Margin="0 0 0 10"
                  SelectedIndex="0">
            <ComboBoxItem Content="Email"/>
            <ComboBoxItem Content="Phone Call"/>
            <ComboBoxItem Content="Text Message"/>
            <ComboBoxItem Content="In-Person Meeting"/>
            <ComboBoxItem Content="Video Conference"/>
            <ComboBoxItem Content="Postal Mail"/>
            <ComboBoxItem Content="Social Media"/>
            <ComboBoxItem Content="Other"/>
        </ComboBox>

        <ComboBox x:Name="SituationComboBox"
                  Grid.Row="6"
                  Padding="6"
                  Margin="0 0 0 10"
                  IsEditable="True"
                  IsTextSearchEnabled="False"
                  Text="AdHoc"/>

        <TextBox x:Name="NotesTextBox"
                 Grid.Row="7"
                 Padding="6"
                 AcceptsReturn="True"
                 TextWrapping="Wrap"
                 VerticalScrollBarVisibility="Auto"
                 Margin="0 0 0 10"
                 TextChanged="NotesTextBox_TextChanged"/>

        <Grid Grid.Row="8">
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <Button Content="Cancel"
                    Grid.Column="1"
                    Width="80" Margin="0 0 5 0"
                    Click="Cancel_Click"/>
            <Button x:Name="SaveButton"
                    Content="Save"
                    Grid.Column="2"
                    Width="80"
                    Click="Save_Click"/>
        </Grid>

        <ListBox x:Name="HistoryList"
                 Grid.Row="9"
                 FontSize="12"
                 Padding="4"
                 Margin="0 10 0 0">
            <ListBox.ItemTemplate>
                <DataTemplate DataType="{x:Type models:Interaction}">
                    <Grid Margin="0 2">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="20"/>
                            <ColumnDefinition/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0"
                                   FontSize="12"
                                   HorizontalAlignment="Center"
                                   VerticalAlignment="Center"
                                   Text="{Binding Person.Relationship, Converter={StaticResource RelationshipGlyphConverter}}"/>
                        <TextBlock Grid.Column="1"
                                   Text="{Binding Notes}"
                                   TextWrapping="Wrap"/>
                    </Grid>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>

        <Button x:Name="ReplyButton"
                Content="Send Response"
                Width="140"
                HorizontalAlignment="Right"
                Margin="0 8 0 0"
                Grid.Row="9"
                Click="ReplyToSelected_Click"/>
    </Grid>
</Window>
